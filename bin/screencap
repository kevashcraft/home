#!/bin/bash

# comments
# Kaitlyn is in the commment here
# and she's really awesome, such a great mom
# I love Kaitlyn :D

screencap=kscreen-$(date -Iseconds).mkv

ffmpeg \
  -f x11grab \
    -video_size 3840x2160 \
    -i :0.0 \
  -f v4l2 \
    -framerate 30 \
    -i /dev/video0 \
  -f alsa \
    -ac 2 \
    -itsoffset 0.4 \
    -i pulse \
  -filter_complex \
    "[0:v]setpts=PTS-STARTPTS[bg]; \
     [1:v]setpts=PTS-STARTPTS[fg]; \
     [bg][fg]overlay=W-w-10:10,format=yuv420p[out]" \
  -map "[out]" \
  -map 2:a \
  -c:v libx264 \
    -preset veryfast \
    -g 30 \
  -c:a aac \
    -b:a 160k \
    -ar 44100 \
  /home/kevin/Documents/screencaps/$screencap

if [ $vlc="true"]; do
  vlc /home/kevin/Documents/screencaps/$screencap
done
